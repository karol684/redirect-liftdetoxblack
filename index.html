<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="refresh" content="0; url=https://wa.me/5569992585472?text=Oi%2C%20quero%20saber%20mais%20sobre%20o%20Lift%20Detox%20Black%20que%20vi%20no%20Pinterest!">
  <title>Lift Detox Black - Redirecionando para o WhatsApp</title>
  <meta name="description" content="Redirecionamento para atendimento exclusivo sobre Lift Detox Black via WhatsApp.">
  <meta name="keywords" content="Lift Detox Black, suplemento, emagrecimento, WhatsApp, comprar">

  <!-- TAG DO PINTEREST COM EVENTO PERSONALIZADO -->
  <!-- Pinterest Tag com Correspondência Avançada -->
  <script>
    !function(e){
      if(!window.pintrk){
        window.pintrk=function(){
          window.pintrk.queue.push(Array.prototype.slice.call(arguments));
        };
        var n=window.pintrk;
        n.queue=[],n.version="3.0";
        var t=document.createElement("script");
        t.async=!0,t.src=e;
        var r=document.getElementsByTagName("script")[0];
        r.parentNode.insertBefore(t,r);
      }
    }("https://s.pinimg.com/ct/core.js");
    
// Função para gerar SHA-256
async function sha256(str) {
  const buffer = new TextEncoder("utf-8").encode(str.trim().toLowerCase());
  const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);
  return Array.from(new Uint8Array(hashBuffer))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

// Exemplo: email coletado dinamicamente ou fixo para teste
const email = "lead@email.com"; // troque pelo email do lead capturado

sha256(email).then(hashedEmail => {
    pintrk('load', '2614444780428', { em: [hashedEmail] });
    pintrk('page');
    pintrk('track', 'Lead');
  });
  </script>

  <noscript>
    <img height="1" width="1" style="display:none;" alt=""
      src="https://ct.pinterest.com/v3/?event=init&tid=2614444780428&noscript=1"/>
  </noscript>
  <!-- End Pinterest Tag -->

</head>
<body>
  <p>Redirecionando para o WhatsApp...</p>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const utms = urlParams.toString();
    const baseWhatsapp = "https://wa.me/5569992585472?text=Oi%2C%20quero%20saber%20mais%20sobre%20o%20Lift%20Detox%20Black%20que%20vi%20no%20Pinterest!";
    const redirectUrl = utms ? `${baseWhatsapp}&${utms}` : baseWhatsapp;

// Captura o pclid (Click ID do Pinterest) se existir na URL
const pclid = urlParams.get('pclid');

// Opcional: enviar para sua API de conversão, se desejar rastrear leads automaticamente
fetch("https://redirect-liftdetoxblack.vercel.app/api/pinterest", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    email: "lead@email.com", // se quiser capturar dinamicamente, substituir
    phone: "5599999999999",  // se quiser capturar dinamicamente, substituir
    value: 137,              // valor do pedido
    currency: "BRL",
    plano: "1pote",
    click_id: pclid
  }),
})
  .then(response => response.json())
  .then(data => console.log("✅ Pinterest evento enviado:", data))
  .catch(error => console.error("❌ Erro ao enviar evento Pinterest:", error));
    
    window.location.href = redirectUrl;
  </script>
  
</body>
</html>
